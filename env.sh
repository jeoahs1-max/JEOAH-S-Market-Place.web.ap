
#!/bin/bash

# Ce script contient toutes les clés nécessaires et configure les secrets sur Vercel.

# 1. Clé secrète de l'API Stripe
VERCEL_STRIPE_SECRET_KEY="sk_test_51SYNGF1alLKcRmX5V3MXvLWRnj7gpt2WNXEHHleOCmRFsRswx0d23TvuEeoEpwa23NAd20SkfNaOllqODR8vdeVD002a3BUmMB"

# 2. Secret du Webhook Stripe
VERCEL_STRIPE_WEBHOOK_SECRET="whsec_QpAVbBMCI7oadJKIWjfb9DGMjCKI71NM"

# 3. Clé d'API GenAI (pour l'assistant Ney)
VERCEL_GENAI_KEY="j3wSspqsTX4tkQjHyTiusXZuLub-djsBPRNbRr10B6g"

# 4. Clé de compte de service Firebase (encodée en base64)
VERCEL_FIREBASE_SERVICE_ACCOUNT_BASE64="ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAiamVvYWhzMS1tYXgtMDMzMjYzNzYtNDliMjciLAogICJwcml2YXRlX2tleV9pZCI6ICIzMTc3NDNjNDkwZjNmY2M1ODkxNTRhNzIzNGI4MTlhY2I1ZTgwZGRkIiwKICAicHJpdmF0ZV9rZXkiOiAiLS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tXG5NSUlFdlFJQkFEQU5CZ2txaGtpRzl3MEJBUUVGQUFTQ0JLY3dnZ1NqQWdFQUFvSUJBUUMrQ2lVdUlWSnJXUzdiXG5WZ2xCZU15K1dXUXk1ZHpTOTJidDB3Qm9hK0NmTG5WdUp2SzduRWl1S3BDRElRMEdrMkVScUhVcGNNcjFONFg0XG5ia1RYN2dFdnMvc2paT3dsTW5PYkh1c3FQUjQxYTNZUDhNWG5JMncwSlg2RExNY1JmM2NQZ3R0WXNhVUZMejhnXG5NazBSalJsTWQvNTNNbGpKNmZNSk9OOE90bGNTZU03UHUzVEEyeWtvUlBzSCtYV29XOUdhQkhuSlIwTHJoODVRXG53YkFsM2hYS1hzaXpKcVdLcytHTHpUSHlEczd2MFo2MjNZS1cwSEtxZlZpTmFPU2VBR3UrYUFEaUNSbGxmOXFhXG5Za1VITHZWQ204WWRhK3J3WFVuNlJGVEs2YXZwNFQzTEtNZjZmNjQ5ZUFVUkNSd2pJbnVqbWpXOUxacEkxSzlDXG5DYkxaTHdTREFnTUJBQUVDZ2dFQUR3ajhjZzdlMTNGaDNLYU02dW9rd0xhUHo5c1J3bnNpWUpSK0JzVHFLNDNnXG5hb3VZVHJHSnFvWGhrdzVOV29UVWZESW91dE9hcXhYdWVuNDI0aUtKWTMzSTA3OExVOUlQQlduSHp6cXdwaWRQXG5XdW1BcnMzRnBNYUdvTmd0RTd4UzdoNDdQbVFubXlabXh5UlRwcHpVTUpHWngxSnJaZVlsZlVoTGxYMWxuQ2RoXG53OVJDTVFhTzdTd2FpZ3IzSnBhVXVTR0l1eUJjellIWTU0WVFqbFNVR0FMTld1cGdNZjNKZ2tSMVF0azlMdGRVXG50Vldhc2o1RXg0MTVkbThVeGE4TGY2UHFrZVpWR28ycmROcVM0dmtxdnNHY0M5MlYyempUekhQSjdock5MTERJXG5kSkR0MEJPUDdRM0FpUmp0Z1g1ZEw2US82NmVMZXBTSXJhWldQdjdHVVFLQmdRRGlLNEozMmlaK2JjZXNXZStuXG43ZGJteGpoRGU4cWVCeVRXMklRSUdIWFpYamloUzZ4VFFhbVRMU05iejVSV0ZtanJhWVVlb09uMDZiblNGNFBLXG5scFFUTGFDNWhtaVVGK3U2Y1RvV0ozaTBEYWM4aSs2dkxzMUV6UzJHb0pwMjE1eE5OSzIzek41N3ZNUm1uNkhkXG5wd2ludHkvWXBlWmU4MURTWUcwcVBrMUlpUUtCZ1FEWEdyZVVhZHB3bElVZlg0S1BsdnZYaVdFdGgvQ3NzeFIrXG5DdTRjd0VlVVU3Ymw1bUZWUjJsc2IzT3loWDhQN1dFM3lYUThSYVBKYzI3TTBtUzRvSmFBYk4wWFlGS0N5bWU5XG5GNkRENTQ5RGgvdkJiM0NiakxNUy9KLyttd3FwM1RINUtWalVNSVl3cFVEeC9XY2RsTmZoak50WjR1dHd2K25uXG5pVzRnd2J6SnF3S0JnR3ZoRFE1V0E5NXlScmV5L2xrL1hTNGVobC9LQUU5NFlONEowSkI3K2xxQVVzcTg2YW1jXG52R0h6T2RabElRQWZHRlSRtGlzn6Suh2/qv3Y2dNLhBLT5o5BgCJSZxXcjxLM9f/OlW2g8nDrUumPSKTqM5HNjGs8Xj9otW8udwZSjwr3QwMKZKG6RWsspmLCvmI77hAoGBAJSqXG5tM3pRMkM5OUJyRFRReHBZd01DTDY0VWJja1Q2RkV5MDR6TXQxWXIzZk81U0ZxMXBDTHp3SHFlZ3lsdkl0YXRuXG42WlVLa0pQWDJ4bG14RVF5Z1RKTGkxYnZ0TGMraXdwT3ZVY0kwS1JjNUt3aGlGT0puKzZjZVR2d0RpT3VoQzV2XG4zRHZ6T1p0L2EyNlVzK0xuRDNtTTc4R2xLeEluSWROcjBaaUVMaVczQW9HQUZvQkhIaHVCYzBpWG12YTlZSjFYXG5Ta0RZdTFJbjVpZ2RlbGVMQ1VGd3ROcFJpcDFGU3piR3RoQlgvQncySnBhM0NLK1VSR2ZWMVNrUCsyYjNKZmtpXG5LTGRSNlM4aU1ibzNMM0VDUU5EVXJBOWNoYUE4S1k1VDFDTndHZmlMK0E4SU1kUlgzU0ZzMlNDZmpJd1cyTXRGXG5aZTJ2Y3A4M1F2RHh6QWNzL3FqZEVmND1cbi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS1cbiIsCiAgImNsaWVudF9lbWFpbCI6ICJmaXJlYmFzZS1hZG1pbnNkay1mYnN2Y0BqZW9haHMxLW1heC0wMzMyNjM3Ni00OWIyNy5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSIsCiAgImNsaWVudF9pZCI6ICIxMDMwNzM1NDcyOTA2NTcwNzI3MDgiLAogICJhdXRoX3VyaSI6ICJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20vby9vYXV0aDIvYXV0aCIsCiAgInRva2VuX3VyaSI6ICJodHRwczovL29hdXRoMi5nb29nbGVhcGlzLmNvbS90b2tlbiIsCiAgImF1dGhfcHJvdmlkZXJfeDUwOV9jZXJ0X3VybCI6ICJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjEvY2VydHMiLAogICJjbGllbnRfeDUwOV9jZXJ0X3VybCI6ICJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9yb2JvdC92MS9tZXRhZGF0YS94NTA5L2ZpcmViYXNlLWFkbWluc2RrLWZic3ZjJTQwamVvYWhzMS1tYXgtMDMzMjYzNzYtNDliMjcuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLAogICJ1bml2ZXJzZV9kb21haW4iOiAiZ29vZ2xlYXBpcy5jb20iCn0="

# --- Commandes pour Vercel --- 
echo "Configuration des secrets sur Vercel...\n"

# Ajoute chaque secret en utilisant la CLI de Vercel
vercel secret add stripe-secret-key "$VERCEL_STRIPE_SECRET_KEY"
vercel secret add stripe-webhook-secret "$VERCEL_STRIPE_WEBHOOK_SECRET"
vercel secret add genai-key "$VERCEL_GENAI_KEY"

# La clé Firebase est très longue, on la passe via stdin pour éviter les problèmes de terminal
echo "$VERCEL_FIREBASE_SERVICE_ACCOUNT_BASE64" | vercel secret add firebase-service-account-base64

echo "\nConfiguration des secrets terminée ! Vous pouvez maintenant déployer votre projet."
